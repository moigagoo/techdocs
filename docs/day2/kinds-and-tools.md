# Виды документации и инструменты документирования

Техническая документация бывает двух типов: мануалы и референсы. У них разные задачи, и пишут их по-разному.

## Виды документации

### Мануалы

Мануал, или туториал — это последовательно изложенная инструкция. Структура мануала — это классическая структура документа, о которой мы говорили вчера.

Мануал — это путешествие из А в Б. А — то, что читатель уже знает. Б — то, чему вы хотите его научить. Чтобы мануал получился полезным, важно ясно понимать А и Б.

Хороший шаблон мануала:

1.  Объявить тему в заголовке.

2.  Написать отдельным абзацем, чему учит мануал (Б).

3.  Написать, что надо знать, чтобы пройти мануал (А).

    Дать ссылку на предыдущие мануалы, которые помогут читателю дойти до уровня А.

4.  Расписать шаги. Хорошо, когда есть сквозной пример, идущий через все шаги.

    Если шаги длиной по предложению, используйте нумерованный список.

    Если абзац-другой — пишите подряд, без номеров: шаг-пример, шаг-пример.

    Если каждый шаг включает несколько абзацев и примеров, поставьте каждый шаг под свой заголовок. Номера в заголовках не пишите.

5.  Подвести итог, показать финальный результат.

6.  Дать ссылку на следующий мануал. Если это последний мануал — на референс.

Эталонный мануал начинается с чистого листа и заканчивается работающим проектом. С чистого листа, потому что это дёшево для читателя, а работающим проектом — потому что это даст читателю психологическое подкрепление.

!!! note "Hello World"
    Кажется, что тему для первого мануала выбрать легко — Hello World. Но я советую остановиться и подумать — а есть ли в этом польза? Действительно ли такой пример должным образом демонстрирует продукт?

    Да, Hello World — это классика, и обычно это очень дешёвое упражнение для читателя. Но главное, — не дешевизна, а полезность. Дёшево — хорошо, но если при этом бесполезно — вы потеряете читателя.

    Техписатель не пишет на автомате и всё подвеграет сомнению. Это хорошая привычка, приучите себя к ней.


### Референсы

Референс — это справочник. Самый популярный пример референса: API-документация.

Если мануал читают от начала до конца как прозу, то референс читают точечно. Для референса важны:

-   Находимость. Движок для документации должен уметь в полнотекстовый поиск.
-   Ссылочность. У каждой статьи должна быть уникальная, читаемая ссылка.
-   Атомарность. Статьи не должны зависеть друг от друга. Ссылаться на другие статьи — можно, полагаться в тексте одной статьи на то, что читатель ознакомлен с другой — нельзя.
-   Генерируемость. Референс зачастую отражает код, растёт и меняется вместе с ним. Вручную за такими изменениями не уследить.

!!! info
    Есть мнение, что API-документация не только не нужна, но и вредна. Аргумент в том, что автоматически генерируемая документация из кода даёт иллюзию задокументированности. И если человек в качестве документации вынужден лезть в код, он глуже поймёт приложение.


    Я считаю, что, как бегун в магазин за хлебом не бежит, а идёт, так и программист не должен читать код только потому, что он это умеет. API-доки читаются легче, чем код, и в этом их польза.


## Языки разметки

Как только появилась письменность, появилась и разметка текста. Бывает, что без разметки текст не прочитать.

![Огласовки в Коране](img/arabian-diacritics.jpg)

Для современного писателя разметка текста — способ сделать текст читабельнее. Выделяя слова и абзацы в общем теле документа, мы управляем вниманием.

Синтаксис HTML или LaTeX громоздок и отвлекает от содержания. Поэтому техписы пишут на так называемый легковесных языках разметки.

Выбрать правильный язык не так просто. Они различаются сложностью и возможностями.

!!! info
    Почему не Ворд? Потому что документация в Ворде не версионируема и не может жить рядом с кодом.


### Markdown

Самый популярный язык, lingua franca в технической коммуникации. Поддерживают все: GitHub, Bitbucket, Slack, Telegram.

Маркдаун должен знать каждый. Простой до примитивности, кривенький и косенький, Маркдаун — пример того, как в историческом соревновании побеждает не совершеннейший, а наиболее приспособленный.

```markdown
# Header

Regular text.

## Subheader

Here's some **bold** and *italic* for you (you can ***combine*** them).

Here's a [link](http://example.com) and an image: ![Alt text](image.png)

Tables are a mess:

| Name    | Age  | Gender |
|---------|------|--------|
| Alice   | 23   | female |
| Bob     | 34   | male   |
| XJ-1234 | 2000 | other  |
```

Плюсы:

-   простота,
-   читается в сыром виде лучше всех,
-   популярность.

Минусы:

-   нет стандарта синтаксиса,
-   нет стандарта и API для расширений.

Ссылки:

-   [Статья в Вики](https://en.wikipedia.org/wiki/Markdown)
-   [Оригинальная статья о языке](https://daringfireball.net/projects/markdown/)
-   [Commonmark](https://commonmark.org/)
-   [GitHub flavored Markdown](https://github.github.com/gfm/)


### ReStructuredText (reST)

Старый язык, сейчас популярен в экосистеме Python в связке со [Sphinx](http://www.sphinx-doc.org/). Пересекается с Маркдауном в базовом синтаксисе.

Приятный язык, хотя и со своими закидонами. Главный плюс — возможность расширения синтаксиса. Благодаря этому возможно существование Сфинкса, который добавляет синтаксис для документирования кода.

```restructuredtext
######
Header
######

Unlike in Markdown where the level of a header is exactly the number of # symbols, in reST, header inheritance is calculated on the fly. Sound cool but in fact it eliminates any attempt to implement includes.

*********
Subheader
*********

**Bold** and *italic* are the same as in Markdown. But you ***can't*** combine them :-(

`Links <http://example.com>`_ look weird until you get used to them.

Image:

.. image:: image.png
    :alt: Alt text

.. note:: reST supports admonitions!
    This is called “semantic markup.”

Tables can be the same ugly mess as in Markdown, but there are saner options—csv and list tables:

.. list-table::
   :header-rows: 1

   * - Name
     - Age
     - Gender
   * - Alice
     - 23
     - female
   * - Bob
     - 34
     - male
   * - XJ-1234
     - 2000
     - other
```

Плюсы:

-   почти все простые вещи делаются просто,
-   бо́льшая выразительность, чем у Маркдауна,
-   семантическая вёрстка,
-   есть API для расширений,
-   есть синтаксис для сложных таблиц,
-   Сфинкс.

Минусы:

-   не все простые вещи делаются просто, например, ссылки и картинки,
-   непопулярность,
-   нефиксированная иерархия заголовков.

Ссылки:

-   [Официальный сайт](http://docutils.sourceforge.net/rst.html)
-   [Статья в Вики](https://en.wikipedia.org/wiki/ReStructuredText)
-   [Справка по языку на сайте Сфинкса](http://sphinx-doc.org/en/latest/usage/restructuredtext/basics.html)


### AsciiDoc

Старый и непопулярный язык, получивший вторую жизнь в экосистеме Ruby в связке с [AsciiDoctor](https://asciidoctor.org). Пересекается с Маркдауном в базовом синтаксисе.

Аскидок — это просто нереальный комбайн, в нём есть всё. Института расширений для него нет, потому что ему они как будто вообще не нужны. По количеству выразительных средств он бьёт всех.

```asciidoc
= Header

Regular paragraph.

== Subheader

Syntax for *bold* and _italic_ is a little different.

https://example.com[Links] are so weird, I can't even.

Image syntax is also, how do I put it, interesting:

image::image.png[Alt text]

NOTE: But the admonition syntax is fire.

Tables can be linearized, with another unconventional syntax construct:

.
|===
|Name
|Age
|Gender

|Alice
|23
|female

|Bob
|34
|male

|XJ-1234
|2000
|other
|===
```

Плюсы:

-   непревзойдённая выразительность,
-   семантическая вёрстка.

Минусы:

-   нет API для расширений,
-   бессистемный синтаксис.

Ссылки:

-   [Официальный сайт](http://www.methods.co.nz/asciidoc/)
-   [Статья в Вики](https://en.wikipedia.org/wiki/AsciiDoc)
-   [Справка по языку на сайте Аскидоктора](https://asciidoctor.org/docs/asciidoc-syntax-quick-reference/)


### Wiki Markup

У каждой вики свой синтаксис, один чудовищнее другого. Включил вики-разметку в список только для честности. Выучивать её нет смысла, потому что он всё равно везде разная. Поэтому же всё равно пользуешься визивигом.


## Инструменты документирования

Сравним несколько инструментов документирования по параметрам:

-   какой язык разметки использует,
-   на чём написан,
-   подходит ли для мануалов,
-   подходит ли для референсов,
-   какие форматы умеет генерировать,
-   насколько легко кастомизировать результат.


### В облаке

Confluence

GitBook

Google Docs

GitHub Pages

GitHub Wiki


### Self hosted

Jekyll

MkDocs

Sphinx

AsciiDoctor

Gatsby

Next

Pandoc

Foliant
